this.Newired=this.Newired||{},this.Newired.Plugins=function(){"use strict";(function(){var e={custom:1,failed:2},t=e,n=window.Document.prototype.createElement,o=window.Document.prototype.createElementNS,i=window.Document.prototype.importNode,r=window.Document.prototype.prepend,a=window.Document.prototype.append,s=window.DocumentFragment.prototype.prepend,c=window.DocumentFragment.prototype.append,l=window.Node.prototype.cloneNode,u=window.Node.prototype.appendChild,d=window.Node.prototype.insertBefore,p=window.Node.prototype.removeChild,h=window.Node.prototype.replaceChild,f=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),m=window.Element.prototype.attachShadow,y=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),v=window.Element.prototype.getAttribute,w=window.Element.prototype.setAttribute,E=window.Element.prototype.removeAttribute,g=window.Element.prototype.getAttributeNS,_=window.Element.prototype.setAttributeNS,b=window.Element.prototype.removeAttributeNS,C=window.Element.prototype.insertAdjacentElement,T=window.Element.prototype.insertAdjacentHTML,N=window.Element.prototype.prepend,A=window.Element.prototype.append,D=window.Element.prototype.before,k=window.Element.prototype.after,L=window.Element.prototype.replaceWith,M=window.Element.prototype.remove,S=window.HTMLElement,O=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),P=window.HTMLElement.prototype.insertAdjacentElement,R=window.HTMLElement.prototype.insertAdjacentHTML,F=new Set;function x(e){var t=F.has(e),n=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(e);return!t&&n}["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"].forEach((function(e){return F.add(e)}));var I=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function j(e){var t=e.isConnected;if(void 0!==t)return t;if(I(e))return!0;for(var n=e;n&&!(n.__CE_isImportDocument||n instanceof Document);)n=n.parentNode||(window.ShadowRoot&&n instanceof ShadowRoot?n.host:void 0);return!(!n||!(n.__CE_isImportDocument||n instanceof Document))}function H(e){var t=e.children;if(t)return Array.prototype.slice.call(t);for(var n=[],o=e.firstChild;o;o=o.nextSibling)o.nodeType===Node.ELEMENT_NODE&&n.push(o);return n}function U(e,t){for(var n=t;n&&n!==e&&!n.nextSibling;)n=n.parentNode;return n&&n!==e?n.nextSibling:null}function B(e,t){return t.firstChild?t.firstChild:U(e,t)}function $(e,t,n){for(var o=e;o;){if(o.nodeType===Node.ELEMENT_NODE){var i=o;t(i);var r=i.localName;if("link"===r&&"import"===i.getAttribute("rel")){var a=i.import;if(void 0===n&&(n=new Set),a instanceof Node&&!n.has(a)){n.add(a);for(var s=a.firstChild;s;s=s.nextSibling)$(s,t,n)}o=U(e,i);continue}if("template"===r){o=U(e,i);continue}var c=i.__CE_shadowRoot;if(c)for(var l=c.firstChild;l;l=l.nextSibling)$(l,t,n)}o=B(e,o)}}var J="http://www.w3.org/1999/xhtml",z=function(e){this._patchesNode=[],this._patchesElement=[],this._hasPatches=!1,this.shadyDomFastWalk=e.shadyDomFastWalk,this.useDocumentConstructionObserver=!e.noDocumentConstructionObserver};z.prototype.forEachElement=function(e,t,n){var o=window.ShadyDom;if(this.shadyDomFastWalk&&o&&o.inUse){if(e.nodeType===Node.ELEMENT_NODE)t(e);if(e.querySelectorAll)for(var i=o.nativeMethods.querySelectorAll.call(e,"*"),r=0;r<i.length;r++)t(i[r])}else $(e,t,n)},z.prototype.addNodePatch=function(e){this._hasPatches=!0,this._patchesNode.push(e)},z.prototype.addElementPatch=function(e){this._hasPatches=!0,this._patchesElement.push(e)},z.prototype.patchTree=function(e){var t=this;this._hasPatches&&this.forEachElement(e,(function(e){return t.patchElement(e)}))},z.prototype.patchNode=function(e){if(this._hasPatches&&!e.__CE_patched){e.__CE_patched=!0;for(var t=0;t<this._patchesNode.length;t++)this._patchesNode[t](e)}},z.prototype.patchElement=function(e){if(this._hasPatches&&!e.__CE_patched){e.__CE_patched=!0;for(var t=0;t<this._patchesNode.length;t++)this._patchesNode[t](e);for(var n=0;n<this._patchesElement.length;n++)this._patchesElement[n](e)}},z.prototype.connectTree=function(t){var n=[];this.forEachElement(t,(function(e){return n.push(e)}));for(var o=0;o<n.length;o++){var i=n[o];i.__CE_state===e.custom?this.connectedCallback(i):this.upgradeReaction(i)}},z.prototype.disconnectTree=function(t){var n=[];this.forEachElement(t,(function(e){return n.push(e)}));for(var o=0;o<n.length;o++){var i=n[o];i.__CE_state===e.custom&&this.disconnectedCallback(i)}},z.prototype.patchAndUpgradeTree=function(e,t){var n=this,o=(t=void 0===t?{}:t).visitedImports,i=t.upgrade||function(e){return n.upgradeReaction(e)},r=[];this.forEachElement(e,(function(e){if(n._hasPatches&&n.patchElement(e),"link"===e.localName&&"import"===e.getAttribute("rel")){var t=e,a=t.import;a instanceof Node&&(a.__CE_isImportDocument=!0,a.__CE_registry=document.__CE_registry),a&&"complete"===a.readyState?a.__CE_documentLoadHandled=!0:e.addEventListener("load",(function(){var e=t.import;if(!e.__CE_documentLoadHandled){e.__CE_documentLoadHandled=!0;var r=new Set;o&&(o.forEach((function(e){return r.add(e)})),r.delete(e)),n.patchAndUpgradeTree(e,{visitedImports:r,upgrade:i})}}))}else r.push(e)}),o);for(var a=0;a<r.length;a++)i(r[a])},z.prototype.upgradeReaction=function(e){try{var t=this._lookupACustomElementDefinition(e.ownerDocument,e.localName);t&&this._upgradeAnElement(e,t)}catch(e){this.reportTheException(e)}},z.prototype._upgradeAnElement=function(t,n){if(void 0===t.__CE_state){n.constructionStack.push(t);try{try{if(new n.constructorFunction!==t)throw new Error("The custom element constructor did not produce the element being upgraded.")}finally{n.constructionStack.pop()}}catch(n){throw t.__CE_state=e.failed,n}if(t.__CE_state=e.custom,t.__CE_definition=n,n.attributeChangedCallback&&t.hasAttributes())for(var o=n.observedAttributes,i=0;i<o.length;i++){var r=o[i],a=t.getAttribute(r);null!==a&&this.attributeChangedCallback(t,r,null,a,null)}j(t)&&this.connectedCallback(t)}},z.prototype.connectedCallback=function(e){var t=e.__CE_definition;if(t.connectedCallback)try{t.connectedCallback.call(e)}catch(e){this.reportTheException(e)}},z.prototype.disconnectedCallback=function(e){var t=e.__CE_definition;if(t.disconnectedCallback)try{t.disconnectedCallback.call(e)}catch(e){this.reportTheException(e)}},z.prototype.attributeChangedCallback=function(e,t,n,o,i){var r=e.__CE_definition;if(r.attributeChangedCallback&&r.observedAttributes.indexOf(t)>-1)try{r.attributeChangedCallback.call(e,t,n,o,i)}catch(e){this.reportTheException(e)}},z.prototype._lookupACustomElementDefinition=function(e,t){var n=e.__CE_registry;if(n&&(e.defaultView||e.__CE_isImportDocument))return n.internal_localNameToDefinition(t)},z.prototype.createAnElement=function(t,i,r){var a=t.__CE_registry;if(a&&(null===r||r===J)){var s=a.internal_localNameToDefinition(i);if(s)try{var c=new s.constructorFunction;if(void 0===c.__CE_state||void 0===c.__CE_definition)throw new Error("Failed to construct '"+i+"': The returned value was not constructed with the HTMLElement constructor.");if(c.namespaceURI!==J)throw new Error("Failed to construct '"+i+"': The constructed element's namespace must be the HTML namespace.");if(c.hasAttributes())throw new Error("Failed to construct '"+i+"': The constructed element must not have any attributes.");if(null!==c.firstChild)throw new Error("Failed to construct '"+i+"': The constructed element must not have any children.");if(null!==c.parentNode)throw new Error("Failed to construct '"+i+"': The constructed element must not have a parent node.");if(c.ownerDocument!==t)throw new Error("Failed to construct '"+i+"': The constructed element's owner document is incorrect.");if(c.localName!==i)throw new Error("Failed to construct '"+i+"': The constructed element's local name is incorrect.");return c}catch(a){this.reportTheException(a);var l=null===r?n.call(t,i):o.call(t,r,i);return Object.setPrototypeOf(l,HTMLUnknownElement.prototype),l.__CE_state=e.failed,l.__CE_definition=void 0,this.patchElement(l),l}}var u=null===r?n.call(t,i):o.call(t,r,i);return this.patchElement(u),u},z.prototype.reportTheException=function(e){var t=e.message,n=e.sourceURL||e.fileName||"",o=e.line||e.lineNumber||0,i=e.column||e.columnNumber||0,r=void 0;void 0===ErrorEvent.prototype.initErrorEvent?r=new ErrorEvent("error",{cancelable:!0,message:t,filename:n,lineno:o,colno:i,error:e}):((r=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,t,n,o),r.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===r.error&&Object.defineProperty(r,"error",{configurable:!0,enumerable:!0,get:function(){return e}}),window.dispatchEvent(r),r.defaultPrevented||console.error(e)};var W=function(){var e=this;this._value=void 0,this._promise=new Promise((function(t){e._resolve=t}))};W.prototype.resolve=function(e){if(this._value)throw new Error("Already resolved.");this._value=e,this._resolve(e)},W.prototype.toPromise=function(){return this._promise};var G=function(e,t){this._observer=void 0,this._internals=e,this._document=t,this._internals.patchAndUpgradeTree(this._document),"loading"===this._document.readyState&&(this._observer=new MutationObserver(this._handleMutations.bind(this)),this._observer.observe(this._document,{childList:!0,subtree:!0}))};G.prototype.disconnect=function(){this._observer&&this._observer.disconnect()},G.prototype._handleMutations=function(e){var t=this._document.readyState;"interactive"!==t&&"complete"!==t||this.disconnect();for(var n=0;n<e.length;n++)for(var o=e[n].addedNodes,i=0;i<o.length;i++){var r=o[i];this._internals.patchAndUpgradeTree(r)}};var q=function(e){this._localNameToConstructorGetter=new Map,this._localNameToDefinition=new Map,this._constructorToDefinition=new Map,this._elementDefinitionIsRunning=!1,this._whenDefinedDeferred=new Map,this._flushCallback=function(e){return e()},this._flushPending=!1,this._unflushedLocalNames=[],this._internals=e,this._documentConstructionObserver=e.useDocumentConstructionObserver?new G(e,document):void 0};q.prototype.polyfillDefineLazy=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");this.internal_assertCanDefineLocalName(e),this._localNameToConstructorGetter.set(e,t),this._unflushedLocalNames.push(e),this._flushPending||(this._flushPending=!0,this._flushCallback((function(){return n._flush()})))},q.prototype.define=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructors must be functions.");this.internal_assertCanDefineLocalName(e),this.internal_reifyDefinition(e,t),this._unflushedLocalNames.push(e),this._flushPending||(this._flushPending=!0,this._flushCallback((function(){return n._flush()})))},q.prototype.internal_assertCanDefineLocalName=function(e){if(!x(e))throw new SyntaxError("The element name '"+e+"' is not valid.");if(this.internal_localNameToDefinition(e))throw new Error("A custom element with name '"+e+"' has already been defined.");if(this._elementDefinitionIsRunning)throw new Error("A custom element is already being defined.")},q.prototype.internal_reifyDefinition=function(e,t){var n,o,i,r,a;this._elementDefinitionIsRunning=!0;try{var s=t.prototype;if(!(s instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var c=function(e){var t=s[e];if(void 0!==t&&!(t instanceof Function))throw new Error("The '"+e+"' callback must be a function.");return t};n=c("connectedCallback"),o=c("disconnectedCallback"),i=c("adoptedCallback"),a=(r=c("attributeChangedCallback"))&&t.observedAttributes||[]}finally{this._elementDefinitionIsRunning=!1}var l={localName:e,constructorFunction:t,connectedCallback:n,disconnectedCallback:o,adoptedCallback:i,attributeChangedCallback:r,observedAttributes:a,constructionStack:[]};return this._localNameToDefinition.set(e,l),this._constructorToDefinition.set(l.constructorFunction,l),l},q.prototype.upgrade=function(e){this._internals.patchAndUpgradeTree(e)},q.prototype._flush=function(){var e=this;if(!1!==this._flushPending){this._flushPending=!1;for(var t=[],n=this._unflushedLocalNames,o=new Map,i=0;i<n.length;i++)o.set(n[i],[]);this._internals.patchAndUpgradeTree(document,{upgrade:function(n){if(void 0===n.__CE_state){var i=n.localName,r=o.get(i);r?r.push(n):e._localNameToDefinition.has(i)&&t.push(n)}}});for(var r=0;r<t.length;r++)this._internals.upgradeReaction(t[r]);for(var a=0;a<n.length;a++){for(var s=n[a],c=o.get(s),l=0;l<c.length;l++)this._internals.upgradeReaction(c[l]);var u=this._whenDefinedDeferred.get(s);u&&u.resolve(void 0)}n.length=0}},q.prototype.get=function(e){var t=this.internal_localNameToDefinition(e);if(t)return t.constructorFunction},q.prototype.whenDefined=function(e){if(!x(e))return Promise.reject(new SyntaxError("'"+e+"' is not a valid custom element name."));var t=this._whenDefinedDeferred.get(e);if(t)return t.toPromise();var n=new W;this._whenDefinedDeferred.set(e,n);var o=this._localNameToDefinition.has(e)||this._localNameToConstructorGetter.has(e),i=-1===this._unflushedLocalNames.indexOf(e);return o&&i&&n.resolve(void 0),n.toPromise()},q.prototype.polyfillWrapFlushCallback=function(e){this._documentConstructionObserver&&this._documentConstructionObserver.disconnect();var t=this._flushCallback;this._flushCallback=function(n){return e((function(){return t(n)}))}},q.prototype.internal_localNameToDefinition=function(e){var t=this._localNameToDefinition.get(e);if(t)return t;var n=this._localNameToConstructorGetter.get(e);if(n){this._localNameToConstructorGetter.delete(e);try{return this.internal_reifyDefinition(e,n())}catch(e){this._internals.reportTheException(e)}}},q.prototype.internal_constructorToDefinition=function(e){return this._constructorToDefinition.get(e)},window.CustomElementRegistry=q,q.prototype.define=q.prototype.define,q.prototype.upgrade=q.prototype.upgrade,q.prototype.get=q.prototype.get,q.prototype.whenDefined=q.prototype.whenDefined,q.prototype.polyfillDefineLazy=q.prototype.polyfillDefineLazy,q.prototype.polyfillWrapFlushCallback=q.prototype.polyfillWrapFlushCallback;var V=function(e,t,n){function o(t){return function(n){for(var o=[],i=0;i<arguments.length;++i)o[i-0]=arguments[i];for(var r=o,a=[],s=[],c=0;c<r.length;c++){var l=r[c];if(l instanceof Element&&j(l)&&s.push(l),l instanceof DocumentFragment)for(var u=l.firstChild;u;u=u.nextSibling)a.push(u);else a.push(l)}t.apply(this,r);for(var d=0;d<s.length;d++)e.disconnectTree(s[d]);if(j(this))for(var p=0;p<a.length;p++){var h=a[p];h instanceof Element&&e.connectTree(h)}}}void 0!==n.prepend&&(t.prepend=o(n.prepend)),void 0!==n.append&&(t.append=o(n.append))},X=function(e){function n(n,o){Object.defineProperty(n,"innerHTML",{enumerable:o.enumerable,configurable:!0,get:o.get,set:function(n){var i=this,r=j(this),a=void 0;if(r&&(a=[],e.forEachElement(this,(function(e){e!==i&&a.push(e)}))),o.set.call(this,n),a)for(var s=0;s<a.length;s++){var c=a[s];c.__CE_state===t.custom&&e.disconnectedCallback(c)}return this.ownerDocument.__CE_registry?e.patchAndUpgradeTree(this):e.patchTree(this),n}})}function i(t,n){t.insertAdjacentElement=function(t,o){var i=j(o),r=n.call(this,t,o);return i&&e.disconnectTree(o),j(r)&&e.connectTree(o),r}}function r(t,n){function o(t,n){for(var o=[],i=t;i!==n;i=i.nextSibling)o.push(i);for(var r=0;r<o.length;r++)e.patchAndUpgradeTree(o[r])}t.insertAdjacentHTML=function(e,t){var i=e.toLowerCase();if("beforebegin"===i){var r=this.previousSibling;n.call(this,i,t),o(r||this.parentNode.firstChild,this)}else if("afterbegin"===i){var a=this.firstChild;n.call(this,i,t),o(this.firstChild,a)}else if("beforeend"===i){var s=this.lastChild;n.call(this,i,t),o(s||this.firstChild,null)}else{if("afterend"!==i)throw new SyntaxError("The value provided ("+String(i)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");var c=this.nextSibling;n.call(this,i,t),o(this.nextSibling,c)}}}m&&(Element.prototype.attachShadow=function(t){var n=m.call(this,t);return e.patchNode(n),this.__CE_shadowRoot=n,n}),y&&y.get?n(Element.prototype,y):O&&O.get?n(HTMLElement.prototype,O):e.addElementPatch((function(e){n(e,{enumerable:!0,configurable:!0,get:function(){return l.call(this,!0).innerHTML},set:function(e){var t="template"===this.localName,n=t?this.content:this,i=o.call(document,this.namespaceURI,this.localName);for(i.innerHTML=e;n.childNodes.length>0;)p.call(n,n.childNodes[0]);for(var r=t?i.content:i;r.childNodes.length>0;)u.call(n,r.childNodes[0])}})})),Element.prototype.setAttribute=function(n,o){if(this.__CE_state!==t.custom)return w.call(this,n,o);var i=v.call(this,n);w.call(this,n,o),o=v.call(this,n),e.attributeChangedCallback(this,n,i,o,null)},Element.prototype.setAttributeNS=function(n,o,i){if(this.__CE_state!==t.custom)return _.call(this,n,o,i);var r=g.call(this,n,o);_.call(this,n,o,i),i=g.call(this,n,o),e.attributeChangedCallback(this,o,r,i,n)},Element.prototype.removeAttribute=function(n){if(this.__CE_state!==t.custom)return E.call(this,n);var o=v.call(this,n);E.call(this,n),null!==o&&e.attributeChangedCallback(this,n,o,null,null)},Element.prototype.removeAttributeNS=function(n,o){if(this.__CE_state!==t.custom)return b.call(this,n,o);var i=g.call(this,n,o);b.call(this,n,o);var r=g.call(this,n,o);i!==r&&e.attributeChangedCallback(this,o,i,r,n)},P?i(HTMLElement.prototype,P):C&&i(Element.prototype,C),R?r(HTMLElement.prototype,R):T&&r(Element.prototype,T),V(e,Element.prototype,{prepend:N,append:A}),function(e,t,n){function o(t){return function(n){for(var o=[],i=0;i<arguments.length;++i)o[i-0]=arguments[i];for(var r=o,a=[],s=[],c=0;c<r.length;c++){var l=r[c];if(l instanceof Element&&j(l)&&s.push(l),l instanceof DocumentFragment)for(var u=l.firstChild;u;u=u.nextSibling)a.push(u);else a.push(l)}t.apply(this,r);for(var d=0;d<s.length;d++)e.disconnectTree(s[d]);if(j(this))for(var p=0;p<a.length;p++){var h=a[p];h instanceof Element&&e.connectTree(h)}}}void 0!==n.before&&(t.before=o(n.before)),void 0!==n.after&&(t.after=o(n.after)),void 0!==n.replaceWith&&(t.replaceWith=function(t){for(var o=[],i=0;i<arguments.length;++i)o[i-0]=arguments[i];for(var r=o,a=[],s=[],c=0;c<r.length;c++){var l=r[c];if(l instanceof Element&&j(l)&&s.push(l),l instanceof DocumentFragment)for(var u=l.firstChild;u;u=u.nextSibling)a.push(u);else a.push(l)}var d=j(this);n.replaceWith.apply(this,r);for(var p=0;p<s.length;p++)e.disconnectTree(s[p]);if(d){e.disconnectTree(this);for(var h=0;h<a.length;h++){var f=a[h];f instanceof Element&&e.connectTree(f)}}}),void 0!==n.remove&&(t.remove=function(){var t=j(this);n.remove.call(this),t&&e.disconnectTree(this)})}(e,Element.prototype,{before:D,after:k,replaceWith:L,remove:M})},K={},Y=window.customElements;function Q(){var e=!!(null==Y?void 0:Y.noDocumentConstructionObserver),o=!!(null==Y?void 0:Y.shadyDomFastWalk),m=new z({noDocumentConstructionObserver:e,shadyDomFastWalk:o});!function(e){var o=function(){var o=this.constructor,i=document.__CE_registry.internal_constructorToDefinition(o);if(!i)throw new Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var r=i.constructionStack;if(0===r.length){var a=n.call(document,i.localName);return Object.setPrototypeOf(a,o.prototype),a.__CE_state=t.custom,a.__CE_definition=i,e.patchElement(a),a}var s=r.length-1,c=r[s];if(c===K){var l=i.localName;throw new Error("Failed to construct '"+l+"': This element was already constructed.")}var u=c;return r[s]=K,Object.setPrototypeOf(u,o.prototype),e.patchElement(u),u};o.prototype=S.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:o}),window.HTMLElement=o}(m),function(e){Document.prototype.createElement=function(t){return e.createAnElement(this,t,null)},Document.prototype.importNode=function(t,n){var o=i.call(this,t,!!n);return this.__CE_registry?e.patchAndUpgradeTree(o):e.patchTree(o),o},Document.prototype.createElementNS=function(t,n){return e.createAnElement(this,n,t)},V(e,Document.prototype,{prepend:r,append:a})}(m),function(e){V(e,DocumentFragment.prototype,{prepend:s,append:c})}(m),function(e){function t(t,n){Object.defineProperty(t,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){if(this.nodeType!==Node.TEXT_NODE){var o=void 0;if(this.firstChild){var i=this.childNodes,r=i.length;if(r>0&&j(this)){o=new Array(r);for(var a=0;a<r;a++)o[a]=i[a]}}if(n.set.call(this,t),o)for(var s=0;s<o.length;s++)e.disconnectTree(o[s])}else n.set.call(this,t)}})}Node.prototype.insertBefore=function(t,n){if(t instanceof DocumentFragment){var o=H(t),i=d.call(this,t,n);if(j(this))for(var r=0;r<o.length;r++)e.connectTree(o[r]);return i}var a=t instanceof Element&&j(t),s=d.call(this,t,n);return a&&e.disconnectTree(t),j(this)&&e.connectTree(t),s},Node.prototype.appendChild=function(t){if(t instanceof DocumentFragment){var n=H(t),o=u.call(this,t);if(j(this))for(var i=0;i<n.length;i++)e.connectTree(n[i]);return o}var r=t instanceof Element&&j(t),a=u.call(this,t);return r&&e.disconnectTree(t),j(this)&&e.connectTree(t),a},Node.prototype.cloneNode=function(t){var n=l.call(this,!!t);return this.ownerDocument.__CE_registry?e.patchAndUpgradeTree(n):e.patchTree(n),n},Node.prototype.removeChild=function(t){var n=t instanceof Element&&j(t),o=p.call(this,t);return n&&e.disconnectTree(t),o},Node.prototype.replaceChild=function(t,n){if(t instanceof DocumentFragment){var o=H(t),i=h.call(this,t,n);if(j(this)){e.disconnectTree(n);for(var r=0;r<o.length;r++)e.connectTree(o[r])}return i}var a=t instanceof Element&&j(t),s=h.call(this,t,n),c=j(this);return c&&e.disconnectTree(n),a&&e.disconnectTree(t),c&&e.connectTree(t),s},f&&f.get?t(Node.prototype,f):e.addNodePatch((function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var e=[],t=this.firstChild;t;t=t.nextSibling)t.nodeType!==Node.COMMENT_NODE&&e.push(t.textContent);return e.join("")},set:function(e){for(;this.firstChild;)p.call(this,this.firstChild);null!=e&&""!==e&&u.call(this,document.createTextNode(e))}})}))}(m),X(m);var y=new q(m);document.__CE_registry=y,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:y})}Y&&!Y.forcePolyfill&&"function"==typeof Y.define&&"function"==typeof Y.get||Q(),window.__CE_installPolyfill=Q}).call(self);class e extends HTMLElement{constructor(){super(),this.options=null,this.key=null,this.container=null,this.containerBounds=null,this.observer=null,this.id=`micro-app-${function(e=8){const t=[];for(let n=0;n<e;n++)t.push(Math.floor(100*Math.random())+1);return t.join("")}()}`}static get observedAttributes(){return["key","options"]}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}attributeChangedCallback(e,t,n){if("options"===e){if(this.options===n)return;this.options=n,this.updateUI()}else if("key"===e){if(this.key===n)return;this.key=n,this.updateUI()}}updateUI(){if(null!==this.options&&null!==this.key&&this.ownerDocument){if(this.inInlineRemoveMicroAppContentElement(this))return;const e=this.ownerDocument.body.getAttribute("data-nw-theme");window.postMessage({channel:"bubble-frame",operation:"loadMicroApp",parameters:{key:this.key,options:this.options,theme:e,elementId:this.id}},"*"),this.registerObserver(this)}}inInlineRemoveMicroAppContentElement(e){const t=e.parentElement;return null!=t&&("nw-inline-remove-micro-app-content"===t.tagName.toLowerCase()||this.inInlineRemoveMicroAppContentElement(t))}registerObserver(e){this.observer=new MutationObserver(((e,t)=>{for(const t of e)"childList"===t.type&&this.containerBoundsChanged()&&document.dispatchEvent(new CustomEvent("microAppBoundsChanged",{detail:this.key}))})),this.observer.observe(e,{attributes:!1,childList:!0,subtree:!0})}containerBoundsChanged(){if(this.container){const e=this.container.getBoundingClientRect();return null===this.containerBounds?(this.containerBounds=e,!0):this.containerBounds.width!==e.width||this.containerBounds.height!==e.height}return!1}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
function t(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))}function n(e,t=null){const n={method:"GET",headers:{}};return t&&(n.headers["nw-auth"]=t),fetch(e,n).then((t=>{if(!t.ok)throw new Error(`Unable to fetch ${e}.`);return t.text()}))}customElements.get("micro-app")||customElements.define("micro-app",e);const o="newired-cross-domain-storage-iframe",i="newired-iframe",r="newired-portal",a=function(e){try{return e.name===o||e.name===i||e.name===r}catch(e){return!0}}(window)?window:function(){const e=i;let t=document.getElementById(e);if(t||(t=document.createElement("iframe"),t.setAttribute("id",e),t.style.display="none",t.style.visibility="hidden",document.body.appendChild(t)),!t.contentWindow)throw new Error(`Browsing context of "${e}" window is discarded.`);return t.contentWindow}();function s(e){if(e&&"object"==typeof e){e.toJSON&&(e.toJSON=function(){return e});for(const t in e)e[t]=s(e[t])}return e}Function.prototype.safeBind=a.Function.prototype.bind,Function.prototype.safeApply=a.Function.prototype.apply,String.prototype.safeTrim=a.String.prototype.trim;var c,l,u,d,p,h,f={Set:a.Set.bind(window),setTimeout:a.setTimeout.bind(window),setInterval:a.setInterval.bind(window),clearTimeout:a.clearTimeout.bind(window),clearInterval:a.clearInterval.bind(window),scrollTo:(e,t,n)=>a.scrollTo.call(e,t,n),JSON:{stringify:function(e,t,n){return a.Prototype&&(e=s(e)),JSON.stringify(e,t,n)},stringifyPretty:function(e){return a.Prototype&&(e=s(e)),JSON.stringify(e,null,"  ")}},array:{push:function(e,t){a.Array.prototype.push.call(e,t)},pushApply:function(e,t){a.Array.prototype.push.apply(e,t)},unique:function(e){return a.Array.from(new Set(e))}}};function m(e){if(void 0===e&&(e=window),e.hasOwnProperty("nwApp"))return e;if(e.hasOwnProperty("newiredRootWindow"))return e.newiredRootWindow;if(e.parent!=e)return m(e.parent);throw new Error("Unable to get Newired root window.")}function y(){return m(window).newired._internal.data}!function(e){e.Bubble="Bubble",e.Modal="Modal",e.Panel="Panel"}(c||(c={})),function(e){e.AnimationNone="AnimationType",e.AnimationBounceTo="AnimationBounceTo",e.AnimationFadeIn="AnimationFadeIn"}(l||(l={})),function(e){e.Next="NEXT",e.Click="CLICK",e.Timing="TIMING",e.Multiple="MULTIPLE",e.Editing="EDITING",e.Hover="HOVER",e.ValueChange="VALUE_CHANGE",e.PageRefresh="PAGE_REFRESH"}(u||(u={})),function(e){e.Top="TOP",e.Right="RIGHT",e.Bottom="BOTTOM",e.Left="LEFT",e.TopLeft="TOP_LEFT",e.TopRight="TOP_RIGHT",e.BottomLeft="BOTTOM_LEFT",e.BottomRight="BOTTOM_RIGHT"}(d||(d={})),function(e){e.Draft="DRAFT",e.Ready="READY"}(p||(p={})),function(e){e.Snippet="snippet",e.Editor="editor"}(h||(h={}));class v{load(e,n,o,i){try{v.fetchMicroAppDescription(n).then((r=>{try{const a=JSON.parse(r);a?a.enabled?this.loadRuntimeFiles(e,a).then((r=>t(this,void 0,void 0,(function*(){const t="microapps/"+n+"/runtime/css/index.css";yield this.appendRuntimeStyle(e,y().deliveryResource(t),`${n}:index.css`);const r="microapps/"+n+"/runtime/themes/"+o+"/css/index.css";yield this.appendRuntimeStyle(e,y().deliveryResource(r),`${n}:${o}/index.css`),i(a,[])}))),(e=>{i(a,[e])})):i(a,[]):i(null,["Unable to parse MicroApp description"])}catch(e){console.warn(`Unable to load MicroApp ${n}, responseText: ${r}`,e),i(null,["Unable to load MicroApp"])}}),(e=>{i(null,[e])}))}catch(e){console.warn(`Unable to load MicroApp ${n}. Failed to load description file.`,e),i(null,[`Unable to load MicroApp ${n}. Failed to load description file. Cause: ${e}`])}}static fetchMicroAppDescription(e){const t=y().deliveryResource("microapps/"+e+"/desc.json");return console.log("Going to fetch MicroApp desc.json from: "+t),n(t)}loadRuntimeFiles(e,t){const n=new Array;return t.runtime.forEach((o=>{const i=v.getRuntimePath(t);".js"===o.substring(o.lastIndexOf(".js"))?f.array.push(n,i+o):".css"===o.substring(o.lastIndexOf(".css"))&&this.appendRuntimeStyle(e,i+o,`${t.key}:${o}`)})),new Promise(((e,t)=>{this.injectRuntimeScripts(n,(n=>{n.length>0?t(n):e([])}))}))}joinRuntimeScripts(e,t,o=""){const i=e.shift();i?n(i).then((n=>{this.joinRuntimeScripts(e,t,`${o}\n// -------- ${i} --------------------------------------------\n${n}`)})):t(o)}injectRuntimeScripts(e,t){this.joinRuntimeScripts(e,(e=>{try{new Function(e)()}catch(e){console.error("MicroApp collected scripts: ",e)}t([])}))}appendRuntimeStyle(e,n,o){return t(this,void 0,void 0,(function*(){return fetch(n).then((e=>{if(!e.ok)throw new Error(`Unable to get CSS: ${n}`);return e.text()})).then((t=>{v.injectStyle(e,t,o)}))}))}static injectStyle(e,t,n){const o=e.createElement("style");o.insertAdjacentText("afterbegin",t),n&&(o.id=n),e.head.appendChild(o)}static getRuntimePath(e){return y().deliveryResource("microapps/"+e.key+"/runtime/")}}const w=(e,t,n,o)=>{const i=function(e){return document.getElementById(e)}(o);if(null==i)return void console.warn(`Unable to initialize MicroApp ${e}. Cause: MicroApp element ${o} not found.`);const r=i.ownerDocument;E.loadMicroApp(r,e,n,((n,o)=>{const r=function(e){let t=e.querySelector(".micro-app-container");t||(t=e.ownerDocument.createElement("div"),t.setAttribute("class","micro-app-container"),e.appendChild(t),function(e){const t=document.createElement("style");t.className="micro-app-placeholder-style",t.innerText="micro-app span.placeholder {display: none;}",e.appendChild(t)}(e));return t}(i);if(0===o.length&&null!==n)if(n.enabled)try{if(null!==t){const n=decodeURI(t),o=function(e){return E.pluginRegistry.get("microapp",e)}(e);o?o.init(r,n):console.error(`Unable to initialize MicroApp ${e}.`)}}catch(t){console.info(`Unable to initialized MicroApp ${e}. Cause:`,t)}else console.info(`Disabled MicroApp ${e}. Cause:`,o),function(e){if(!e.getElementsByClassName("newired-microapp-disabled")[0]){const t=document.createElement("div");t.className="newired-microapp-disabled",t.innerText="We're sorry, there's nothing to show",e.appendChild(t)}}(r);else console.error(`Unable to initialize MicroApp ${e}. Cause:`,o),function(e){if(!e.getElementsByClassName("newired-microapp-not-available")[0]){const t=document.createElement("div");t.className="newired-microapp-not-available",t.innerText="Ups, something is missing",e.appendChild(t)}}(r)}))};class E{static loadMicroApp(e,t,n,o){const i=this.microAppDescriptions[t];i?o(i.description,[]):this.microAppLoader.load(e,t,n,((e,n)=>{console.log(`MicroApps ${t} resources loaded.`,e),this.microAppDescriptions[t]={description:e},o(e,n)}))}}E.microAppLoader=new v,E.microAppDescriptions={},E.microAppObjects={},E.pluginRegistry={add:function(e,t,n){void 0===E.microAppObjects[t]&&(console.log(`Register Plugin [${e}] '${t}'`,n),E.microAppObjects[t]=n)},get:function(e,t){return E.microAppObjects[t]},microApps:function(){return E.microAppObjects}};const g="newired-journey-link";let _=null;var b,C;!function(e){e.Play="nw-play",e.Deleted="nw-deleted",e.NotAvailable="nw-notAvailable",e.NotPublished="nw-notPublished"}(b||(b={}));class T extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}getLink(e){if(_||(_=m(window).newired._internal.getJourneyLinks()),_)for(const t of _)if(t.id===e)return t;return null}render(){this.reset();const e=this.getLink(Number(this.dataset.journeyId));e?e.deleted?this.deletedLink(e.name):e.available?this.normalLink(e):this.notPublishedLink(e.name):window.isRunningInEditor?this.deletedLink("_permanently_deleted_"):this.notAvailableLink()}reset(){this.onclick=null,this.classList.remove(b.Play),this.classList.remove(b.Deleted),this.classList.remove(b.NotAvailable),this.classList.remove(b.NotPublished)}normalLink(e){try{const t=m(window).newired._internal;this.onclick=t.startJourneyLink.safeBind(this,e)}catch(e){}this.classList.add(b.Play),this.textContent=e.name,this.title="Play Journey"+(e.name.length>25?": "+e.name:"")}deletedLink(e){this.classList.add(b.Deleted),this.textContent=e,this.title="Linked Journey was deleted!"}notAvailableLink(){this.classList.add(b.NotAvailable),this.textContent="Linked Journey is not available",this.title="Linked Journey is not available"}notPublishedLink(e){this.classList.add(b.NotPublished),this.textContent=e,this.title="Linked Journey will not be submitted"}}!function(e){e.NONE="NONE",e.CAJA="CAJA"}(C||(C={}));let N=C.NONE;var A;(function(e){!function(t,n){let o=!1;e.addEventListener(t,(function(){o||(o=!0,e.requestAnimationFrame((function(){e.dispatchEvent(new CustomEvent(n)),o=!1})))}))}("resize","newired-resize")})(A=window),function(){const e=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){try{if(this.target&&this.target.hasAttribute("newired-tag"))throw new Error("Stopping immediate propagation")}catch(e){return void console.log("overrideStopImmediatePropagation",e)}e.safeApply(this)}}(),function(e){e.document.overridenGetElementsByTagName||(e.document.overridenGetElementsByTagName=e.document.getElementsByTagName,e.document.getElementsByTagName=function(t){return"IFRAME"===t.toUpperCase()?document.querySelectorAll("IFRAME:not([id^=newired])"):e.document.overridenGetElementsByTagName(t)})}(A),window.newired._internal.data.getSettings().frontendHtmlSanitize&&function(e=C.CAJA,t){N=e;try{switch(N){case C.NONE:console.log("Usage of HTML sanitizer is disabled by configuration.");break;case C.CAJA:{const e="html-css-sanitizer-minified.js";n(t?`${t}/${e}`:y().deliveryResource(e)).then((e=>{Function(e)()}),(e=>{console.warn("CAJA HTML Sanitizer not initialized!",e)}));break}default:throw new Error("Not implemented")}}catch(t){console.warn(`Error injecting HTML Sanitizer ${e}.`,t),N=C.NONE}}(),customElements.get(g)||customElements.define(g,T),customElements.get("micro-app")||customElements.define("micro-app",e);var D={loadMicroApp:w,registry:E.pluginRegistry,sendEmail:window.newired._internal.sendEmail,JSON:f.JSON};return window.addEventListener("message",(function(e){const t=e.data;try{if("bubble-frame"===t.channel)switch(t.operation){case"loadMicroApp":document.getElementById(t.parameters.elementId)&&w(t.parameters.key,t.parameters.options,t.parameters.theme,t.parameters.elementId)}}catch(e){}})),D}();